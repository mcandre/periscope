#!/usr/bin/env node
'use strict';

import PeriscopeScanner from '../lib/periscope.js';

/** usage show a help menu. */
function usage(program) {
    console.log(`Usage: ${program} <path> [<path> [<path> ...]]`);
}

var scanner = new PeriscopeScanner();

const argv = process.argv;
const program = argv[0];
const args = argv.slice(1);

if (args.length === 0) {
    usage(program);
    process.exit(1);
}

scanner.scanPaths(args);

for (const error of scanner.errors) {
    console.error(error);
}

for (const warning of scanner.warnings) {
    console.log(warning);
}

if (scanner.errors.length !== 0 || scanner.warnings.length !== 0) {
    process.exit(1);
}
